@*
    Model Step (Step 5) - Workflow Grid Item
*@
<div class="workflow-grid-item" data-step="5">
    <div class="workflow-grid-item-header">
        <span>ü§ñ</span>
        Model
    </div>
    <div class="workflow-grid-item-content">
        <div class="flow-item" onclick="toggleModelSelector()" tabindex="0">
            <span class="icon">ü§ñ</span>
            <span class="value" id="modelValue">
                @if (ViewBag.AvailableModels != null && ViewBag.AvailableModels.Count > 0)
                {
                    @(ViewBag.AvailableModels[0])
                }
                else
                {
                    <em>No models available</em>
                }
            </span>
            <span class="edit-icon">‚úèÔ∏è</span>
        </div>

        <!-- Hidden dropdown that appears on click -->
        <div id="modelDropdown" class="workflow-dropdown" style="display: none;">
            <select class="workflow-form-select" id="modelSelect" name="model">
                @if (ViewBag.AvailableModels != null && ViewBag.AvailableModels.Count > 0)
                {
                    var firstModel = ViewBag.AvailableModels[0];
                    @foreach (var availableModel in ViewBag.AvailableModels)
                    {
                        if (availableModel == firstModel)
                        {
                            <option value="@availableModel" selected>@availableModel</option>
                        }
                        else
                        {
                            <option value="@availableModel">@availableModel</option>
                        }
                    }
                }
                else
                {
                    <option value="">No models available</option>
                }
            </select>
        </div>
    </div>
</div>